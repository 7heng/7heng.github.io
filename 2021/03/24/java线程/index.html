<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="123456789101112131415161718192021222324252627282930313233343536373839404142ä¾‹1ï¼šå®ç°Runnableæ¥å£åˆ›å»ºå¤šçº¿ç¨‹ï¼›æ­£ç¡®çš„ç¨‹åºã€‚class A implements Runnable&amp;#123;	public int tic">
    

    <!--Author-->
    
        <meta name="author" content="7heng">
    

    <!-- Title -->
    
    <title>javaçº¿ç¨‹ | Heng</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- jQuery -->
    <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Heng" type="application/atom+xml">
</head>

<body>

    <!-- Content -->
    <section class="article-container">
    <!-- Back Home -->
    <a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

        <!-- Page Header -->
        <header class="intro-header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <div class="post-heading">
                            <h1>
                                javaçº¿ç¨‹
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Post Content -->
        <article>
            <div class="container">
                <div class="row">
                    <!-- Post Main Content -->
                    <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹1ï¼šå®ç°Runnableæ¥å£åˆ›å»ºå¤šçº¿ç¨‹ï¼›æ­£ç¡®çš„ç¨‹åºã€‚</span><br><span class="line">class A implements Runnable</span><br><span class="line">&#123;</span><br><span class="line">	public int tickets &#x3D; 10000;</span><br><span class="line">	String str &#x3D; new String(&quot;æ’æ’æ’&quot;);</span><br><span class="line">		</span><br><span class="line">public void run()</span><br><span class="line">&#123;</span><br><span class="line">	while (true)</span><br><span class="line">	&#123;</span><br><span class="line">		synchronized (str)		&#x2F;&#x2F; åŒæ­¥ä»£ç å—ã€‚</span><br><span class="line">		&#123;</span><br><span class="line">			if (tickets &gt; 0)</span><br><span class="line">			&#123;</span><br><span class="line">				System.out.printf(&quot;%sçº¿ç¨‹æ­£åœ¨å–å‡ºç¬¬%då¼ ç¥¨\n&quot;,</span><br><span class="line">					Thread.currentThread().getName(), tickets);</span><br><span class="line">				--tickets;	</span><br><span class="line">			&#125;</span><br><span class="line">			else</span><br><span class="line">			&#123;</span><br><span class="line">				break;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TestTickets_2</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		A aa &#x3D; new A();</span><br><span class="line">		Thread t1 &#x3D; new Thread(aa);</span><br><span class="line">		t1.start();	</span><br><span class="line">		</span><br><span class="line">â€‹	Thread t2 &#x3D; new Thread(aa);</span><br><span class="line">â€‹	t2.start();		</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç†è§£ï¼šå› ä¸ºæ˜¯å®ç°äº†Runnableæ¥å£ï¼Œæ‰€ä»¥ä¸ç®¡æ˜¯t1,t2éƒ½åªæ˜¯ä¼ é€’äº†ç±»Aé€ å‡ºæ¥çš„ä¸€ä¸ªå¯¹è±¡aa,å› æ­¤t1,t2æ‰€è®¿é—®çš„ticketså’Œstréƒ½æ˜¯åŒä¸€ä¸ªç±»ä¸­çš„å±æ€§,å¹¶ä¸ç”¨å»è®¾ç½®ä¸ºstaticã€‚æ‰€ä»¥Ticketsç›¸åŒï¼ŒåŒæ­¥ä»£ç å—é”å®šçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ç¨‹åºæ­£ç¡®ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹2ï¼šç›´æ¥ç»§æ‰¿Threadç±»çš„æ–¹æ³•ï¼›æ­£ç¡®çš„ç¨‹åºã€‚</span><br><span class="line">class A extends Thread</span><br><span class="line">&#123;</span><br><span class="line">	public static int tickets &#x3D; 1000;  &#x2F;&#x2F;staticä¸èƒ½çœ</span><br><span class="line">	public static String str &#x3D; new String(&quot;å“ˆå“ˆ&quot;);  &#x2F;&#x2F;staticä¸èƒ½çœ</span><br><span class="line">		</span><br><span class="line">public void run()				&#x2F;&#x2F;  é‡å†™Threadç±»ä¸­çš„runæ–¹æ³•ï¼Œæ‰€ä»¥ä¸Šä¸¤è¡Œçš„staticä¸èƒ½çœç•¥ã€‚</span><br><span class="line">&#123;</span><br><span class="line">	while (true)</span><br><span class="line">	&#123;</span><br><span class="line">		synchronized (str)		&#x2F;&#x2F; åŒæ­¥ä»£ç å—ã€‚</span><br><span class="line">		&#123;</span><br><span class="line">			if (tickets &gt; 0)</span><br><span class="line">			&#123;</span><br><span class="line">				System.out.printf(&quot;%sçº¿ç¨‹æ­£åœ¨å–å‡ºç¬¬%då¼ ç¥¨\n&quot;,</span><br><span class="line">					Thread.currentThread().getName(), tickets);</span><br><span class="line">				--tickets;	</span><br><span class="line">			&#125;</span><br><span class="line">			else</span><br><span class="line">			&#123;</span><br><span class="line">				break;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TestTickets_3</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		A aa1 &#x3D; new A();</span><br><span class="line">		aa1.start();	</span><br><span class="line">											&#x2F;&#x2F;  å †ä¸­å­˜åœ¨ä¸¤ä¸ªå¯¹è±¡  okï¼</span><br><span class="line">		A aa2 &#x3D; new A();</span><br><span class="line">		aa2.start();		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç†è§£ï¼šç»§æ‰¿Threadç±»çš„Aç±»newå‡ºæ¥ä¸¤ä¸ªå¯¹è±¡aa1å’Œaa2,æœ¬è¯¥æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç±»Açš„å±æ€§ï¼Œä½†å› ä¸ºç±»Aä¸­çš„å±æ€§æ˜¯static,æ‰€ä»¥aa1å’Œaa2å…±åŒæ‹¥æœ‰ticketså’Œstr,æ‰€ä»¥åŒæ­¥ä»£ç å—çš„å¯¹è±¡ç›¸åŒï¼Œå‡ºå”®çš„ticketsç›¸åŒï¼Œå› æ­¤ç¨‹åºæ­£ç¡®ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹3ï¼šç›´æ¥ç»§æ‰¿Threadç±»çš„æ–¹æ³•ï¼›æ­£ç¡®çš„ç¨‹åºã€‚</span><br><span class="line">class A extends Thread</span><br><span class="line">&#123;</span><br><span class="line">	public static int tickets &#x3D; 1000;  &#x2F;&#x2F;staticä¸èƒ½çœ</span><br><span class="line">	public String str &#x3D; new String(&quot;æ’æ’æ’&quot;);  &#x2F;&#x2F;staticä¸èƒ½çœ</span><br><span class="line">		</span><br><span class="line">public void run()				&#x2F;&#x2F; é‡å†™Threadç±»ä¸­çš„runæ–¹æ³•ï¼Œæ‰€ä»¥ä¸Šä¸¤è¡Œçš„staticä¸èƒ½çœç•¥ã€‚</span><br><span class="line">&#123;</span><br><span class="line">	String str &#x3D; &quot;æ’å­&quot;;	</span><br><span class="line">	while (true)</span><br><span class="line">	&#123;</span><br><span class="line">		synchronized (str)		&#x2F;&#x2F; åŒæ­¥ä»£ç å—ã€‚</span><br><span class="line">		&#123;</span><br><span class="line">			if (tickets &gt; 0)</span><br><span class="line">			&#123;</span><br><span class="line">				System.out.printf(&quot;%sçº¿ç¨‹æ­£åœ¨å–å‡ºç¬¬%då¼ ç¥¨\n&quot;,</span><br><span class="line">					Thread.currentThread().getName(), tickets);</span><br><span class="line">				--tickets;	</span><br><span class="line">			&#125;</span><br><span class="line">			else</span><br><span class="line">			&#123;</span><br><span class="line">				break;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TestTickets_4</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		A aa1 &#x3D; new A();</span><br><span class="line">		aa1.start();	</span><br><span class="line">								&#x2F;&#x2F; å †ä¸­å­˜åœ¨ä¸¤ä¸ªå¯¹è±¡</span><br><span class="line">		A aa2 &#x3D; new A();</span><br><span class="line">		aa2.start();		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç†è§£ï¼šç»§æ‰¿Threadç±»çš„Aç±»newå‡ºæ¥ä¸¤ä¸ªå¯¹è±¡aa1å’Œaa2,æœ¬è¯¥æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç±»Açš„å±æ€§ï¼Œä½†å› ä¸ºç±»Aä¸­çš„ticketså±æ€§æ˜¯static,æ‰€ä»¥aa1å’Œaa2å…±æ‹¥ticketså±æ€§ï¼Œä½†stræ˜¯éstaticçš„ï¼Œæ‰€ä»¥åŒæ­¥ä»£ç å—ä¸­çš„å¯¹è±¡å¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œrun()æ–¹æ³•æ—¶,åˆé‡æ–°å®šä¹‰äº†åœ¨æ•°æ®åŒºçš„str,æ‰€ä»¥åŒæ­¥ä»£ç å—ç»‘å®šçš„è¿˜æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤è¯¥ç¨‹åºæ­£ç¡®ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹4ï¼šè°ƒç”¨Runnableæ¥å£çš„æ–¹æ³•ï¼›æ­£ç¡®çš„ç¨‹åºã€‚</span><br><span class="line">class A implements Runnable</span><br><span class="line">&#123;</span><br><span class="line">	public static int tickets &#x3D; 1000;</span><br><span class="line">	String  str &#x3D; new String(&quot;æ’&quot;);		&#x2F;&#x2F;   newå‡ºæ¥çš„stråœ¨å †åŒºï¼Œä¸¤ç§è°ƒç”¨çš„è¯ä¼šä¸æ˜¯åŒä¸€ä¸ªstr;</span><br><span class="line">		</span><br><span class="line">public void run()  </span><br><span class="line">&#123;</span><br><span class="line">	String str &#x3D; &quot;æ’å­&quot;;  				&#x2F;&#x2F; å±€éƒ¨å˜é‡strï¼Œ åœ¨æ•°æ®åŒºï¼Œæ˜¯åŒä¸€ä¸ªstr;</span><br><span class="line">	</span><br><span class="line">	while (true)</span><br><span class="line">	&#123;</span><br><span class="line">		synchronized (str)    &#x2F;&#x2F; éœ€è¦synchronized(ç±»å¯¹è±¡å)</span><br><span class="line">		&#123;</span><br><span class="line">			if (tickets &gt; 0)</span><br><span class="line">			&#123;</span><br><span class="line">				System.out.printf(&quot;%sçº¿ç¨‹æ­£åœ¨å–å‡ºç¬¬%då¼ ç¥¨\n&quot;,</span><br><span class="line">					Thread.currentThread().getName(), tickets);</span><br><span class="line">				--tickets;	</span><br><span class="line">			&#125;</span><br><span class="line">			else</span><br><span class="line">			&#123;</span><br><span class="line">				break;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TestTickets_9</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		A aa &#x3D; new A();</span><br><span class="line">		A bb &#x3D; new A();</span><br><span class="line">		Thread t1 &#x3D; new Thread(aa);</span><br><span class="line">		t1.start();	</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">â€‹	Thread t2 &#x3D; new Thread(bb);</span><br><span class="line">â€‹	t2.start();	</span><br><span class="line">â€‹		</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç†è§£ï¼šç±»Aå®ç°äº†Runnableæ¥å£ï¼Œè¯¥ç¨‹åºä¸ä¾‹1ç›¸ä¼¼ï¼Œä½†è¯¥ç¨‹åºç±»A newå‡ºäº†ä¸¤ä¸ªå¯¹è±¡ï¼Œå› æ­¤å¼€è¾Ÿäº†ä¸¤å—ç©ºé—´ï¼Œt1,t2çš„å¼•ç”¨åˆ†åˆ«æ˜¯aaå’Œbb,å¹¶éåŒä¸€ä¸ªå¼•ç”¨ï¼Œä½†åœ¨ç±»Aä¸­ï¼ŒTicketsæ˜¯staticçš„ï¼Œæ‰€ä»¥t1,t2è¿˜æ˜¯å…±åŒæ‹¥æœ‰åŒä¸€ä¸ªTickets,ä½†strå¯¹äºt1,t2æ¥è¯´å°±ä¸æ˜¯åŒä¸€ä¸ªå±æ€§ï¼Œå¯æ˜¯ï¼Œåœ¨æ‰§è¡Œrun()æ–¹æ³•çš„æ—¶å€™ï¼Œé‡Œé¢å®šä¹‰äº†åœ¨æ•°æ®åŒºçš„å±€éƒ¨å˜é‡str,è¿™åˆé‡æ–°ä½¿å¾—åŒæ­¥ä»£ç å—ä¸­t1,t2æ‰€ç»‘å®šçš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤è¯¥ç¨‹åºä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹5ï¼šå®ç°Runnableæ¥å£çš„æ–¹æ³•ï¼›é”™è¯¯çš„ç¨‹åºã€‚</span><br><span class="line">class A implements Runnable</span><br><span class="line">&#123;</span><br><span class="line">	public static int tickets &#x3D; 1000;</span><br><span class="line">	String  str &#x3D; new String(&quot;æ’æ’æ’æ’&quot;);		&#x2F;&#x2F;   newå‡ºæ¥çš„stråœ¨å †åŒºï¼Œä¸¤ç§è°ƒç”¨çš„è¯ä¼šä¸æ˜¯åŒä¸€ä¸ªstr;</span><br><span class="line">		</span><br><span class="line">public void run()  </span><br><span class="line">&#123;		</span><br><span class="line">â€‹	while (true)</span><br><span class="line">â€‹	&#123;</span><br><span class="line">â€‹		synchronized (str)    &#x2F;&#x2F; éœ€è¦synchronized(ç±»å¯¹è±¡å)</span><br><span class="line">â€‹		&#123;</span><br><span class="line">â€‹			if (tickets &gt; 0)</span><br><span class="line">â€‹			&#123;</span><br><span class="line">â€‹				System.out.printf(&quot;%sçº¿ç¨‹æ­£åœ¨å–å‡ºç¬¬%då¼ ç¥¨\n&quot;,</span><br><span class="line">â€‹					Thread.currentThread().getName(), tickets);</span><br><span class="line">â€‹				--tickets;	</span><br><span class="line">â€‹			&#125;</span><br><span class="line">â€‹			else</span><br><span class="line">â€‹			&#123;</span><br><span class="line">â€‹				break;</span><br><span class="line">â€‹			&#125;</span><br><span class="line">â€‹		&#125;</span><br><span class="line">â€‹	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TestTickets_9</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		A aa &#x3D; new A();</span><br><span class="line">		A bb &#x3D; new A();</span><br><span class="line">		Thread t1 &#x3D; new Thread(aa);</span><br><span class="line">		t1.start();	</span><br><span class="line">		</span><br><span class="line">â€‹	Thread t2 &#x3D; new Thread(bb);</span><br><span class="line">â€‹	t2.start();	</span><br><span class="line">â€‹		</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç†è§£ï¼š(å¯¹æ¯”ä¾‹4)ï¼Œå°‘äº†run()æ–¹æ³•ä¸­çš„	String str &#x3D; &quot;æ’å­&quot;;æ‰€ä»¥åŒæ­¥ä»£ç å—ä¸­çš„å¯¹è±¡å¹¶æœªæ˜¯ç»Ÿä¸€å¯¹è±¡ï¼Œå› æ­¤è¯¥ç¨‹åºé”™è¯¯ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹6ï¼šç›´æ¥ç»§æ‰¿Threadç±»çš„æ–¹æ³•ï¼›é”™è¯¯çš„ç¨‹åºã€‚</span><br><span class="line">class A extends Thread</span><br><span class="line">&#123;</span><br><span class="line">	public static int tickets &#x3D; 1000;  &#x2F;&#x2F;staticä¸èƒ½çœ</span><br><span class="line">	public String str &#x3D; new String(&quot;æ’æ’æ’&quot;);  &#x2F;&#x2F;staticä¸èƒ½çœ</span><br><span class="line">		</span><br><span class="line">public void run()				&#x2F;&#x2F; é‡å†™Threadç±»ä¸­çš„runæ–¹æ³•ï¼Œæ‰€ä»¥ä¸Šä¸¤è¡Œçš„staticä¸èƒ½çœç•¥ã€‚</span><br><span class="line">&#123;	</span><br><span class="line">	while (true)</span><br><span class="line">	&#123;</span><br><span class="line">		synchronized (str)		&#x2F;&#x2F; åŒæ­¥ä»£ç å—ã€‚</span><br><span class="line">		&#123;</span><br><span class="line">			if (tickets &gt; 0)</span><br><span class="line">			&#123;</span><br><span class="line">				System.out.printf(&quot;%sçº¿ç¨‹æ­£åœ¨å–å‡ºç¬¬%då¼ ç¥¨\n&quot;,</span><br><span class="line">					Thread.currentThread().getName(), tickets);</span><br><span class="line">				--tickets;	</span><br><span class="line">			&#125;</span><br><span class="line">			else</span><br><span class="line">			&#123;</span><br><span class="line">				break;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TestTickets_4</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		A aa1 &#x3D; new A();</span><br><span class="line">		aa1.start();	</span><br><span class="line">								&#x2F;&#x2F; å †ä¸­å­˜åœ¨ä¸¤ä¸ªå¯¹è±¡</span><br><span class="line">		A aa2 &#x3D; new A();</span><br><span class="line">		aa2.start();		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç†è§£ï¼š(å¯¹æ¯”ä¾‹3)ç»§æ‰¿Threadç±»çš„Aç±»newå‡ºæ¥ä¸¤ä¸ªå¯¹è±¡aa1å’Œaa2,æœ¬è¯¥æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç±»Açš„å±æ€§ï¼Œä½†å› ä¸ºç±»Aä¸­çš„ticketså±æ€§æ˜¯static,æ‰€ä»¥aa1å’Œaa2å…±æ‹¥ticketså±æ€§ï¼Œä½†stræ˜¯éstaticçš„ï¼Œæ‰€ä»¥åŒæ­¥ä»£ç å—ä¸­çš„å¯¹è±¡å¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤è¯¥ç¨‹åºé”™è¯¯ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="Locké”ï¼š"><a href="#Locké”ï¼š" class="headerlink" title="Locké”ï¼š"></a>Locké”ï¼š</h3><ul>
<li>ä»JDK5.0å¼€å§‹ï¼Œjavaæä¾›äº†æ›´å¼ºå¤§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶â€”é€šè¿‡æ˜¾ç¤ºå®šä¹‰åŒæ­¥é”å¯¹è±¡æ¥å®ç°åŒæ­¥ã€‚åŒæ­¥é”ä½¿ç”¨lockå¯¹è±¡å……å½“ã€‚</li>
<li>java.util.concurrent.locks.lockæ¥å£æ˜¯æ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®çš„å·¥å…·ï¼Œé”æä¾›äº†å¯¹èµ„æºçš„ç‹¬å è®¿é—®ï¼Œæ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹lockå¯¹è±¡åŠ é”ï¼Œçº¿ç¨‹å¼€å§‹è®¿é—®å…±äº«èµ„æºä¹‹å‰åº”å…ˆè·å¾—lockå¯¹è±¡ã€‚</li>
<li>ReentrantLocké”å®ç°äº†lockï¼Œå®ƒæ‹¥æœ‰ä¸synchronizedç›¸åŒçš„å¹¶å‘æ€§å’Œå†…å­˜å®šä¹‰ï¼Œåœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ§åˆ¶ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ReentrantLock,å¯ä»¥æ˜¾ç¤ºåŠ é”ã€é‡Šæ”¾é”ã€‚</li>
</ul>
<p><strong>Demoï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">class Window implements Runnable&#123;</span><br><span class="line"></span><br><span class="line">    private int ticket &#x3D; 100;</span><br><span class="line">    &#x2F;&#x2F;1.å®ä¾‹åŒ–ReentrantLock</span><br><span class="line">    private ReentrantLock lock &#x3D; new ReentrantLock();</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        while(true)&#123;</span><br><span class="line">            try&#123;</span><br><span class="line">    </span><br><span class="line">                &#x2F;&#x2F;2.è°ƒç”¨é”å®šæ–¹æ³•lock()</span><br><span class="line">                lock.lock();</span><br><span class="line">    </span><br><span class="line">                if(ticket &gt; 0)&#123;</span><br><span class="line">    </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">    </span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + &quot;ï¼šå”®ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&quot; + ticket);</span><br><span class="line">                    ticket--;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;finally &#123;</span><br><span class="line">                &#x2F;&#x2F;3.è°ƒç”¨è§£é”æ–¹æ³•ï¼šunlock()</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class LockTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Window w &#x3D; new Window();</span><br><span class="line"></span><br><span class="line">        Thread t1 &#x3D; new Thread(w);</span><br><span class="line">        Thread t2 &#x3D; new Thread(w);</span><br><span class="line">        Thread t3 &#x3D; new Thread(w);</span><br><span class="line">    </span><br><span class="line">        t1.setName(&quot;çª—å£1&quot;);</span><br><span class="line">        t2.setName(&quot;çª—å£2&quot;);</span><br><span class="line">        t3.setName(&quot;çª—å£3&quot;);</span><br><span class="line">    </span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å°Tipsï¼š"><a href="#å°Tipsï¼š" class="headerlink" title="å°Tipsï¼š"></a>å°Tipsï¼š</h4><p><strong>è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæœ‰å‡ ç§æ–¹å¼ï¼Ÿ</strong></p>
<ul>
<li>3ç§ï¼ŒåŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥ä»£ç å—ï¼Œlocké”ã€‚</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨é¡ºåºï¼š</strong>Lock é”â€”-&gt; åŒæ­¥ä»£ç å—ï¼ˆå·²ç»è¿›å…¥äº†æ–¹æ³•ä½“ï¼Œåˆ†é…äº†ç›¸åº”èµ„æºï¼‰â€”&gt;åŒæ­¥æ–¹æ³•ï¼ˆåœ¨æ–¹æ³•ä½“ä¹‹å¤–ï¼‰</li>
</ul>
<p><strong>synchronized ä¸ Lockçš„å¼‚åŒï¼Ÿ</strong></p>
<ul>
<li><strong>ç›¸åŒï¼š</strong>äºŒè€…éƒ½å¯ä»¥è§£å†³çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚</li>
<li><strong>ä¸åŒï¼š</strong><ul>
<li>synchronizedæœºåˆ¶åœ¨æ‰§è¡Œå®Œç›¸åº”çš„åŒæ­¥ä»£ç ä»¥åï¼Œè‡ªåŠ¨é‡Šæ”¾åŒæ­¥ç›‘è§†å™¨ã€‚</li>
<li>Lock éœ€è¦æ‰‹åŠ¨çš„å¯åŠ¨åŒæ­¥ï¼ˆ lock() ï¼‰ï¼ŒåŒæ—¶ç»“æŸåŒæ­¥ä¹Ÿéœ€è¦æ‰‹åŠ¨çš„å®ç°ï¼ˆ unlock() ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>synchronizedä¸Lockçš„å¯¹æ¯”ï¼š</strong></p>
<ul>
<li>Lockæ˜¯æ˜¾ç¤ºé”ï¼ˆæ‰‹åŠ¨å¼€å¯å’Œå…³é—­é”ï¼Œåˆ«å¿˜è®°å…³é—­é”ï¼‰synchronizedæ˜¯éšå¼é”ï¼Œå‡ºç°äº†ä½œç”¨åŸŸçš„è‡ªåŠ¨é‡Šæ”¾ã€‚</li>
<li>Lockåªæœ‰ä»£ç å—é”ï¼Œsynchronized æœ‰ä»£ç å—é”å’Œæ–¹æ³•é”ã€‚</li>
<li>ä½¿ç”¨lock é”ï¼ŒJVMå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ã€‚å¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šçš„å­ç±»ï¼‰</li>
</ul>
<h3 id="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ï¼š"><a href="#åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ï¼š" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ï¼š"></a>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ï¼š</h3><p>åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°äº†ç»§æ‰¿Threadç±»å’Œå®ç°Runnableæ¥å£ä¸¤ç§æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä½†æ˜¯åˆ›å»ºçº¿ç¨‹çš„æ–¹æ³•ä¸åªæ˜¯è¿™ä¸¤ç§å‘¦ï¼Œè€Œä¸”åœ¨å¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿä¸èƒ½æ¯æ¬¡ç”¨åˆ°çº¿ç¨‹éƒ½å»é€ æŠŠï¼Œä¸è¦é‡å¤é€ è½®å­æˆ‘ä»¬ä¹Ÿéƒ½æˆ–å¤šæˆ–å°‘å¬åˆ«äººè°ˆèµ·è¿‡ï¼Œä½†æ˜¯å¶å°”é€ é€ è½®å­ä¹Ÿä¼šè®©ä½ å¯¹ä»£ç æœ‰æ›´æ·±åˆ»çš„ç†è§£å‘¦ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹åˆ›å»ºçº¿ç¨‹çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼š</p>
<p><strong>Demoï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">import java.util.concurrent.Callable;</span><br><span class="line">import java.util.concurrent.ExecutionException;</span><br><span class="line">import java.util.concurrent.FutureTask</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"></span><br><span class="line"> * åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ï¼šå®ç°Callableæ¥å£ã€‚ --- JDK 5.0æ–°å¢</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> * å¦‚ä½•ç†è§£å®ç°Callableæ¥å£çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ¯”å®ç°Runnableæ¥å£åˆ›å»ºå¤šçº¿ç¨‹æ–¹å¼å¼ºå¤§ï¼Ÿ</span><br><span class="line"> * 1. call()å¯ä»¥æœ‰è¿”å›å€¼çš„ã€‚</span><br><span class="line"> * 2. call()å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¢«å¤–é¢çš„æ“ä½œæ•è·ï¼Œè·å–å¼‚å¸¸çš„ä¿¡æ¯</span><br><span class="line"> * 3. Callableæ˜¯æ”¯æŒæ³›å‹çš„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   *&#x2F;</span><br><span class="line">   </span><br><span class="line">   &#x2F;&#x2F;1.åˆ›å»ºä¸€ä¸ªå®ç°Callableçš„å®ç°ç±»</span><br><span class="line">   class NumThread implements Callable&#123;</span><br><span class="line">   &#x2F;&#x2F;2.å®ç°callæ–¹æ³•ï¼Œå°†æ­¤çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„æ“ä½œå£°æ˜åœ¨call()ä¸­</span><br><span class="line">   @Override</span><br><span class="line">   public Object call() throws Exception &#123;</span><br><span class="line">       int sum &#x3D; 0;</span><br><span class="line">       for (int i &#x3D; 1; i &lt;&#x3D; 100; i++) &#123;</span><br><span class="line">           if(i % 2 &#x3D;&#x3D; 0)&#123;</span><br><span class="line">               System.out.println(i);</span><br><span class="line">               sum +&#x3D; i;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       return sum;</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class ThreadNew &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;3.åˆ›å»ºCallableæ¥å£å®ç°ç±»çš„å¯¹è±¡</span><br><span class="line">        NumThread numThread &#x3D; new NumThread();</span><br><span class="line">        &#x2F;&#x2F;4.å°†æ­¤Callableæ¥å£å®ç°ç±»çš„å¯¹è±¡ä½œä¸ºä¼ é€’åˆ°FutureTaskæ„é€ å™¨ä¸­ï¼Œåˆ›å»ºFutureTaskçš„å¯¹è±¡</span><br><span class="line">        FutureTask futureTask &#x3D; new FutureTask(numThread);</span><br><span class="line">        &#x2F;&#x2F;5.å°†FutureTaskçš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°Threadç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThreadå¯¹è±¡ï¼Œå¹¶è°ƒç”¨start()</span><br><span class="line">        new Thread(futureTask).start();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;6.è·å–Callableä¸­callæ–¹æ³•çš„è¿”å›å€¼</span><br><span class="line">            &#x2F;&#x2F;get()è¿”å›å€¼å³ä¸ºFutureTaskæ„é€ å™¨å‚æ•°Callableå®ç°ç±»é‡å†™çš„call()çš„è¿”å›å€¼ã€‚</span><br><span class="line">            Object sum &#x3D; futureTask.get();</span><br><span class="line">            System.out.println(&quot;æ€»å’Œä¸ºï¼š&quot; + sum);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼å››ï¼š"><a href="#åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼å››ï¼š" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼å››ï¼š"></a>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼å››ï¼š</h3><p>è¿™æ˜¯æˆ‘ä»¬å¼€å‘ä¸­ç»å¸¸ç”¨çš„æ–¹å¼å‘¦ï¼š</p>
<p><strong>Demoï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">import java.util.concurrent.ExecutorService;</span><br><span class="line">import java.util.concurrent.Executors;</span><br><span class="line">import java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"></span><br><span class="line"> * åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼å››ï¼šä½¿ç”¨çº¿ç¨‹æ± </span><br><span class="line">   *</span><br><span class="line"> * å¥½å¤„ï¼š</span><br><span class="line"> * 1.æé«˜å“åº”é€Ÿåº¦ï¼ˆå‡å°‘äº†åˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶é—´ï¼‰</span><br><span class="line"> * 2.é™ä½èµ„æºæ¶ˆè€—ï¼ˆé‡å¤åˆ©ç”¨çº¿ç¨‹æ± ä¸­çº¿ç¨‹ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºï¼‰</span><br><span class="line"> * 3.ä¾¿äºçº¿ç¨‹ç®¡ç†</span><br><span class="line"> * corePoolSizeï¼šæ ¸å¿ƒæ± çš„å¤§å°</span><br><span class="line"> * maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°</span><br><span class="line"> * keepAliveTimeï¼šçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ—¶æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´åä¼šç»ˆæ­¢</span><br><span class="line"> </span><br><span class="line">   *&#x2F;</span><br><span class="line"></span><br><span class="line">class NumberThread implements Runnable&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        for(int i &#x3D; 0;i &lt;&#x3D; 100;i++)&#123;</span><br><span class="line">            if(i % 2 &#x3D;&#x3D; 0)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + &quot;: &quot; + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class NumberThread1 implements Runnable&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        for(int i &#x3D; 0;i &lt;&#x3D; 100;i++)&#123;</span><br><span class="line">            if(i % 2 !&#x3D; 0)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + &quot;: &quot; + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class ThreadPool &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;1. æä¾›æŒ‡å®šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </span><br><span class="line">        ExecutorService service &#x3D; Executors.newFixedThreadPool(10);</span><br><span class="line">        ThreadPoolExecutor service1 &#x3D; (ThreadPoolExecutor) service;</span><br><span class="line">        &#x2F;&#x2F;è®¾ç½®çº¿ç¨‹æ± çš„å±æ€§</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;        System.out.println(service.getClass());</span><br><span class="line">&#x2F;&#x2F;        service1.setCorePoolSize(15);</span><br><span class="line">&#x2F;&#x2F;        service1.setKeepAliveTime();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;2.æ‰§è¡ŒæŒ‡å®šçš„çº¿ç¨‹çš„æ“ä½œã€‚éœ€è¦æä¾›å®ç°Runnableæ¥å£æˆ–Callableæ¥å£å®ç°ç±»çš„å¯¹è±¡</span><br><span class="line">        service.execute(new NumberThread());&#x2F;&#x2F;é€‚åˆé€‚ç”¨äºRunnable</span><br><span class="line">        service.execute(new NumberThread1());&#x2F;&#x2F;é€‚åˆé€‚ç”¨äºRunnable</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;        service.submit(Callable callable);&#x2F;&#x2F;é€‚åˆä½¿ç”¨äºCallable</span><br><span class="line">        &#x2F;&#x2F;3.å…³é—­è¿æ¥æ± </span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



                            <!-- Meta -->
                            <div class="post-meta">
                                <hr>
                                <br>
                                <div class="post-tags">
                                    
                                </div>
                                <div class="post-date">
                                    2021-03-24
                                </div>
                            </div>
                    </div>

                    <!-- Comments -->
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <!-- Disqus Comments -->


                    </div>
                </div>
            </div>
        </article>
</section>

<!-- Image viewer-->

    <!-- Custom picture view-->
    <link href="/css/viewer.min.css" rel="stylesheet" />
    <script
      src="/js/viewer.min.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    
    <script type="text/javascript">
      // set image viewer
      Viewer.setDefaults({
        zoomRatio: [0.5],
        navbar: false,
        toolbar: false,
        button: false,
        title: [2, (image, imageData) => `${image.alt}`],
        show: function() {
          this.viewer.zoomTo(0.5);
        }
      });
      var imageList = document.getElementsByTagName("img");
      Array.prototype.forEach.call(imageList, element => {
        var viewer = new Viewer(element);
      });
    </script>

    
    <!-- Scripts -->
    <script type="text/javascript">
    console.log("Â© zchen9 ğŸ™‹ 2015-" + new Date().getFullYear());
</script>
  
    <!-- Google Analytics -->
    

    <!-- Service Worker -->
    <!-- if using service worker -->

    
</body>

</html>