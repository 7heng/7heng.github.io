<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="String
String字符串：使用一对” “引起来来标识。
String声明为final的，不可被继承。
String实现了Serializable接口：表示字符串是支持序列化的。
实现了Comparable接口：表示String可以比较大小。


String内部定义了final、char[]">
    

    <!--Author-->
    
        <meta name="author" content="7heng">
    

    <!-- Title -->
    
    <title>String类与StringBuffer和StringBuilder | Heng</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- jQuery -->
    <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Heng" type="application/atom+xml">
</head>

<body>

    <!-- Content -->
    <section class="article-container">
    <!-- Back Home -->
    <a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

        <!-- Page Header -->
        <header class="intro-header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <div class="post-heading">
                            <h1>
                                String类与StringBuffer和StringBuilder
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Post Content -->
        <article>
            <div class="container">
                <div class="row">
                    <!-- Post Main Content -->
                    <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><ul>
<li>String字符串：使用一对” “引起来来标识。</li>
<li>String声明为final的，不可被继承。</li>
<li>String实现了Serializable接口：表示字符串是支持序列化的。<ul>
<li>实现了Comparable接口：表示String可以比较大小。</li>
</ul>
</li>
<li>String内部定义了final、char[]、value 用于存储字符串数据。</li>
<li>String：代表不可变的字符序列。简称：不可变性。<ul>
<li>体现：①：当对字符串重新赋值时，需要重写指定内存区域赋值，不能使用原有的value进行赋值。</li>
<li>②：当对现有的字符串进行连接操作时，也需要重新指定内存区域赋值。不能使用原有的value进行赋值。</li>
<li>③：当调用String的replace() 方法修改指定字符或字符串时，也需要重新指定内存区域赋值，不能使用原有的value进行赋值。</li>
</ul>
</li>
<li>通过字面量的方式（区别于new）给一个字符串赋值，此时的字符串值声明在字符串常量池中。</li>
<li>字符串常量池是不会对相同内容的字符串开辟不同的空间的。</li>
</ul>
<p>**Demo：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">**</span><br><span class="line"></span><br><span class="line">    public void test1()&#123;</span><br><span class="line">        String s1 &#x3D; &quot;abc&quot;;&#x2F;&#x2F;字面量的定义方式</span><br><span class="line">        String s2 &#x3D; &quot;abc&quot;;</span><br><span class="line">        s1 &#x3D; &quot;hello&quot;;</span><br><span class="line">    </span><br><span class="line">        System.out.println(s1 &#x3D;&#x3D; s2);&#x2F;&#x2F;比较s1和s2的地址值</span><br><span class="line">    </span><br><span class="line">        System.out.println(s1);&#x2F;&#x2F;hello</span><br><span class="line">        System.out.println(s2);&#x2F;&#x2F;abc</span><br><span class="line">    </span><br><span class="line">        System.out.println(&quot;*****************&quot;);</span><br><span class="line">    </span><br><span class="line">        String s3 &#x3D; &quot;abc&quot;;</span><br><span class="line">        s3 +&#x3D; &quot;def&quot;;</span><br><span class="line">        System.out.println(s3);&#x2F;&#x2F;abcdef</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">    </span><br><span class="line">        System.out.println(&quot;*****************&quot;);</span><br><span class="line">    </span><br><span class="line">        String s4 &#x3D; &quot;abc&quot;;</span><br><span class="line">        String s5 &#x3D; s4.replace(&#39;a&#39;, &#39;m&#39;);</span><br><span class="line">        System.out.println(s4);&#x2F;&#x2F;abc</span><br><span class="line">        System.out.println(s5);&#x2F;&#x2F;mbc</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>String的实例化方式：</strong></p>
<ul>
<li>通过字面量定义的方式。</li>
<li>通过new + 构造器的方式。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> 面试题：String s &#x3D; new String(&quot;abc&quot;);方式创建对象，在内存中创建了几个对象？</span><br><span class="line">        两个:一个是堆空间中new结构，另一个是char[]对应的常量池中的数据：&quot;abc&quot;</span><br><span class="line"></span><br><span class="line"> *&#x2F;</span><br><span class="line">@Test</span><br><span class="line">public void test2()&#123;</span><br><span class="line">    &#x2F;&#x2F;通过字面量定义的方式：此时的s1和s2的数据javaEE声明在方法区中的字符串常量池中。</span><br><span class="line">    String s1 &#x3D; &quot;javaEE&quot;;</span><br><span class="line">    String s2 &#x3D; &quot;javaEE&quot;;</span><br><span class="line">    &#x2F;&#x2F;通过new + 构造器的方式:此时的s3和s4保存的地址值，是数据在堆空间中开辟空间以后对应的地址值。</span><br><span class="line">    String s3 &#x3D; new String(&quot;javaEE&quot;);</span><br><span class="line">    String s4 &#x3D; new String(&quot;javaEE&quot;);</span><br><span class="line"></span><br><span class="line">    System.out.println(s1 &#x3D;&#x3D; s2);&#x2F;&#x2F;true</span><br><span class="line">    System.out.println(s1 &#x3D;&#x3D; s3);&#x2F;&#x2F;false</span><br><span class="line">    System.out.println(s1 &#x3D;&#x3D; s4);&#x2F;&#x2F;false</span><br><span class="line">    System.out.println(s3 &#x3D;&#x3D; s4);&#x2F;&#x2F;false</span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;***********************&quot;);</span><br><span class="line">    Person p1 &#x3D; new Person(&quot;Tom&quot;,12);</span><br><span class="line">    Person p2 &#x3D; new Person(&quot;Tom&quot;,12);</span><br><span class="line"></span><br><span class="line">    System.out.println(p1.name.equals(p2.name));&#x2F;&#x2F;true</span><br><span class="line">    System.out.println(p1.name &#x3D;&#x3D; p2.name);&#x2F;&#x2F;true</span><br><span class="line"></span><br><span class="line">    p1.name &#x3D; &quot;Jerry&quot;;</span><br><span class="line">    System.out.println(p2.name);&#x2F;&#x2F;Tom</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>String的使用：</strong></p>
<pre><code>/*
结论：
1.常量与常量的拼接结果在常量池。且常量池中不会存在相同内容的常量。
2.只要其中有一个是变量，结果就在堆中。
3.如果拼接的结果调用intern()方法，返回值就在常量池中
 */
@Test
public void test4()&#123;
    String s1 = &quot;javaEEhadoop&quot;;
    String s2 = &quot;javaEE&quot;;
    String s3 = s2 + &quot;hadoop&quot;;
    System.out.println(s1 == s3);//false

    final String s4 = &quot;javaEE&quot;;//s4:常量
    String s5 = s4 + &quot;hadoop&quot;;
    System.out.println(s1 == s5);//true

&#125;

@Test
public void test3()&#123;
    String s1 = &quot;javaEE&quot;;
    String s2 = &quot;hadoop&quot;;

    String s3 = &quot;javaEEhadoop&quot;;
    String s4 = &quot;javaEE&quot; + &quot;hadoop&quot;;
    String s5 = s1 + &quot;hadoop&quot;;
    String s6 = &quot;javaEE&quot; + s2;
    String s7 = s1 + s2;

    System.out.println(s3 == s4);//true
    System.out.println(s3 == s5);//false
    System.out.println(s3 == s6);//false
    System.out.println(s3 == s7);//false
    System.out.println(s5 == s6);//false
    System.out.println(s5 == s7);//false
    System.out.println(s6 == s7);//false

    String s8 = s6.intern();//返回值得到的s8使用的常量值中已经存在的“javaEEhadoop”
    System.out.println(s3 == s8);//true
&#125;</code></pre>
<p><strong>String与byte[]和char[]之间的转换：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">public class StringTest1 &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;*</span><br><span class="line">    String 与 byte[]之间的转换</span><br><span class="line">    编码：String --&gt; byte[]:调用String的getBytes()</span><br><span class="line">    解码：byte[] --&gt; String:调用String的构造器</span><br><span class="line">    </span><br><span class="line">    编码：字符串 --&gt;字节  (看得懂 ---&gt;看不懂的二进制数据)</span><br><span class="line">    解码：编码的逆过程，字节 --&gt; 字符串 （看不懂的二进制数据 ---&gt; 看得懂）</span><br><span class="line">    </span><br><span class="line">    说明：解码时，要求解码使用的字符集必须与编码时使用的字符集一致，否则会出现乱码。</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void test3() throws UnsupportedEncodingException &#123;</span><br><span class="line">        String str1 &#x3D; &quot;abc123中国&quot;;</span><br><span class="line">        byte[] bytes &#x3D; str1.getBytes();&#x2F;&#x2F;使用默认的字符集，进行编码。</span><br><span class="line">        System.out.println(Arrays.toString(bytes));</span><br><span class="line">    </span><br><span class="line">        byte[] gbks &#x3D; str1.getBytes(&quot;gbk&quot;);&#x2F;&#x2F;使用gbk字符集进行编码。</span><br><span class="line">        System.out.println(Arrays.toString(gbks));</span><br><span class="line">    </span><br><span class="line">        System.out.println(&quot;******************&quot;);</span><br><span class="line">    </span><br><span class="line">        String str2 &#x3D; new String(bytes);&#x2F;&#x2F;使用默认的字符集，进行解码。</span><br><span class="line">        System.out.println(str2);</span><br><span class="line">    </span><br><span class="line">        String str3 &#x3D; new String(gbks);</span><br><span class="line">        System.out.println(str3);&#x2F;&#x2F;出现乱码。原因：编码集和解码集不一致！</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String str4 &#x3D; new String(gbks, &quot;gbk&quot;);</span><br><span class="line">        System.out.println(str4);&#x2F;&#x2F;没有出现乱码。原因：编码集和解码集一致！</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    &#x2F;*</span><br><span class="line">    String 与 char[]之间的转换</span><br><span class="line">    </span><br><span class="line">    String --&gt; char[]:调用String的toCharArray()</span><br><span class="line">    char[] --&gt; String:调用String的构造器</span><br><span class="line">     *&#x2F;</span><br><span class="line">     </span><br><span class="line">    @Test</span><br><span class="line">    public void test2()&#123;</span><br><span class="line">        String str1 &#x3D; &quot;abc123&quot;;  &#x2F;&#x2F;题目： a21cb3</span><br><span class="line">    </span><br><span class="line">        char[] charArray &#x3D; str1.toCharArray();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; charArray.length; i++) &#123;</span><br><span class="line">            System.out.println(charArray[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        char[] arr &#x3D; new char[]&#123;&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;,&#39;o&#39;&#125;;</span><br><span class="line">        String str2 &#x3D; new String(arr);</span><br><span class="line">        System.out.println(str2);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#x2F;*</span><br><span class="line">    复习：</span><br><span class="line">    String 与基本数据类型、包装类之间的转换。</span><br><span class="line">    </span><br><span class="line">    String --&gt; 基本数据类型、包装类：调用包装类的静态方法：parseXxx(str)</span><br><span class="line">    基本数据类型、包装类 --&gt; String:调用String重载的valueOf(xxx)</span><br><span class="line">    </span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void test1()&#123;</span><br><span class="line">        String str1 &#x3D; &quot;123&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;        int num &#x3D; (int)str1;&#x2F;&#x2F;错误的</span><br><span class="line">        int num &#x3D; Integer.parseInt(str1);</span><br><span class="line"></span><br><span class="line">        String str2 &#x3D; String.valueOf(num);&#x2F;&#x2F;&quot;123&quot;</span><br><span class="line">        String str3 &#x3D; num + &quot;&quot;;</span><br><span class="line">    </span><br><span class="line">        System.out.println(str1 &#x3D;&#x3D; str3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="StringBuffer："><a href="#StringBuffer：" class="headerlink" title="StringBuffer："></a>StringBuffer：</h2><p><strong>StringBuffer类由来</strong></p>
<ul>
<li>String类对象一旦创建就不可更改    </li>
<li>如果经常对字符串内容进行修改而使用String的话，就会导致即消耗空间又耗时间。</li>
<li>例子：<ul>
<li>String s1 = “abasdas”;        String str2 = “123”;</li>
<li>String s = s1 + s2;</li>
<li>删除str1中的字母d    </li>
</ul>
</li>
<li>StringBuffer对象的内容是可以改变的    </li>
<li>因此String类中没有修改字符串的方法，但是StringBuffer类中却有大量修改字符串的方法。</li>
</ul>
<p><strong>Demo：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class SBuffer&#123;</span><br><span class="line">	public static void main(String[] args)&#123;</span><br><span class="line">		StringBuffer sb &#x3D; new StringBuffer();</span><br><span class="line">		sb.append(&quot;abc&quot;);</span><br><span class="line">		sb.append(&quot;123&quot;);</span><br><span class="line">		System.out.println(&quot;sb &#x3D;&quot;+ sb);   	&#x2F;&#x2F;  sb &#x3D; abc123</span><br><span class="line">		sb.insert(3,&quot;--&quot;);</span><br><span class="line">		System.out.println(&quot;sb &#x3D;&quot;+ sb);  	&#x2F;&#x2F;  sb &#x3D; abc--123</span><br><span class="line">		sb.delete(2,6);				&#x2F;&#x2F;  把下标从2开始到下标为6-1的字符删除。  也即是6-2删除4个字符。</span><br><span class="line">		System.out.println(&quot;sb &#x3D; &quot;+ sb);    &#x2F;&#x2F;  sb &#x3D; ab23</span><br><span class="line">		sb.reverse();</span><br><span class="line">		System.out.println(&quot;sb &#x3D; &quot;+ sb);    &#x2F;&#x2F;  sb &#x3D; 32ba</span><br><span class="line">		String str &#x3D; sb.toString();					&#x2F;&#x2F;  转换为Strng对象。</span><br><span class="line">		System.out.println(&quot;sb &#x3D; &quot;+ sb);	&#x2F;&#x2F;  str &#x3D; 32ba</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer的常用方法：</span><br><span class="line"></span><br><span class="line">StringBuffer append(xxx)：提供了很多的append()方法，用于进行字符串拼接</span><br><span class="line">StringBuffer delete(int start,int end)：删除指定位置的内容</span><br><span class="line">StringBuffer replace(int start, int end, String str)：把[start,end)位置替换为str</span><br><span class="line">StringBuffer insert(int offset, xxx)：在指定位置插入xxx</span><br><span class="line">StringBuffer reverse() ：把当前字符序列逆转</span><br><span class="line">public int indexOf(String str)</span><br><span class="line">public String substring(int start,int end):返回一个从start开始到end索引结束的左闭右开区间的子字符串</span><br><span class="line">public int length()</span><br><span class="line">public char charAt(int n )</span><br><span class="line">public void setCharAt(int n ,char ch)</span><br><span class="line"></span><br><span class="line">        总结：</span><br><span class="line">        增：append(xxx)</span><br><span class="line">        删：delete(int start,int end)</span><br><span class="line">        改：setCharAt(int n ,char ch) &#x2F; replace(int start, int end, String str)</span><br><span class="line">        查：charAt(int n )</span><br><span class="line">        插：insert(int offset, xxx)</span><br><span class="line">        长度：length();</span><br><span class="line">        *遍历：for() + charAt() &#x2F; toString()</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void test2()&#123;</span><br><span class="line">        StringBuffer s1 &#x3D; new StringBuffer(&quot;abc&quot;);</span><br><span class="line">        s1.append(1);</span><br><span class="line">        s1.append(&#39;1&#39;);</span><br><span class="line">        System.out.println(s1);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;        s1.delete(2,4);</span><br><span class="line">&#x2F;&#x2F;        s1.replace(2,4,&quot;hello&quot;);</span><br><span class="line">&#x2F;&#x2F;        s1.insert(2,false);</span><br><span class="line">&#x2F;&#x2F;        s1.reverse();</span><br><span class="line">        String s2 &#x3D; s1.substring(1, 3);</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s1.length());</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">对比String、StringBuffer、StringBuilder三者的效率：</span><br><span class="line">    从高到低排列：StringBuilder &gt; StringBuffer &gt; String</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Test</span><br><span class="line">    public void test3()&#123;</span><br><span class="line">        &#x2F;&#x2F;初始设置</span><br><span class="line">        long startTime &#x3D; 0L;</span><br><span class="line">        long endTime &#x3D; 0L;</span><br><span class="line">        String text &#x3D; &quot;&quot;;</span><br><span class="line">        StringBuffer buffer &#x3D; new StringBuffer(&quot;&quot;);</span><br><span class="line">        StringBuilder builder &#x3D; new StringBuilder(&quot;&quot;);</span><br><span class="line">        &#x2F;&#x2F;开始对比</span><br><span class="line">        startTime &#x3D; System.currentTimeMillis();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 20000; i++) &#123;</span><br><span class="line">            buffer.append(String.valueOf(i));</span><br><span class="line">        &#125;</span><br><span class="line">        endTime &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;StringBuffer的执行时间：&quot; + (endTime - startTime));</span><br><span class="line"></span><br><span class="line">        startTime &#x3D; System.currentTimeMillis();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 20000; i++) &#123;</span><br><span class="line">            builder.append(String.valueOf(i));</span><br><span class="line">        &#125;</span><br><span class="line">        endTime &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;StringBuilder的执行时间：&quot; + (endTime - startTime));</span><br><span class="line"></span><br><span class="line">        startTime &#x3D; System.currentTimeMillis();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 20000; i++) &#123;</span><br><span class="line">            text &#x3D; text + i;</span><br><span class="line">        &#125;</span><br><span class="line">        endTime &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;String的执行时间：&quot; + (endTime - startTime));</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>小Tips：</strong></p>
<pre><code>String、StringBuffer、StringBuilder三者的异同？
String:不可变的字符序列；底层使用char[]存储
StringBuffer:可变的字符序列；线程安全的，效率低；底层使用char[]存储
StringBuilder:可变的字符序列；jdk5.0新增的，线程不安全的，效率高；底层使用char[]存储

源码分析：
String str = new String();//char[] value = new char[0];
String str1 = new String(&quot;abc&quot;);//char[] value = new char[]&#123;&#39;a&#39;,&#39;b&#39;,&#39;c&#39;&#125;;

StringBuffer sb1 = new StringBuffer();//char[] value = new char[16];底层创建了一个长度是16的数组。
System.out.println(sb1.length());//
sb1.append(&#39;a&#39;);//value[0] = &#39;a&#39;;
sb1.append(&#39;b&#39;);//value[1] = &#39;b&#39;;

StringBuffer sb2 = new StringBuffer(&quot;abc&quot;);//char[] value = new char[&quot;abc&quot;.length() + 16];

//问题1. System.out.println(sb2.length());//3
//问题2. 扩容问题:如果要添加的数据底层数组盛不下了，那就需要扩容底层的数组。
         默认情况下，扩容为原来容量的2倍 + 2，同时将原有数组中的元素复制到新的数组中。

        指导意义：开发中建议大家使用：StringBuffer(int capacity) 或 StringBuilder(int capacity</code></pre>


                            <!-- Meta -->
                            <div class="post-meta">
                                <hr>
                                <br>
                                <div class="post-tags">
                                    
                                </div>
                                <div class="post-date">
                                    2021-04-14
                                </div>
                            </div>
                    </div>

                    <!-- Comments -->
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <!-- Disqus Comments -->


                    </div>
                </div>
            </div>
        </article>
</section>

<!-- Image viewer-->

    <!-- Custom picture view-->
    <link href="/css/viewer.min.css" rel="stylesheet" />
    <script
      src="/js/viewer.min.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    
    <script type="text/javascript">
      // set image viewer
      Viewer.setDefaults({
        zoomRatio: [0.5],
        navbar: false,
        toolbar: false,
        button: false,
        title: [2, (image, imageData) => `${image.alt}`],
        show: function() {
          this.viewer.zoomTo(0.5);
        }
      });
      var imageList = document.getElementsByTagName("img");
      Array.prototype.forEach.call(imageList, element => {
        var viewer = new Viewer(element);
      });
    </script>

    
    <!-- Scripts -->
    <script type="text/javascript">
    console.log("© zchen9 🙋 2015-" + new Date().getFullYear());
</script>
  
    <!-- Google Analytics -->
    

    <!-- Service Worker -->
    <!-- if using service worker -->

    
</body>

</html>